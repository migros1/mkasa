<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kasa Sayımı</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
        }
        .container {
            width: 70%;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .header input {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 10px 0;
            display: block;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .header input[type="number"] {
            width: 50px;
            margin: 0 auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f37021;
            color: white;
        }
        input[type="number"] {
            width: 100px;
            padding: 5px;
            text-align: center;
        }
        .logo {
            display: block;
            margin: 0 auto 20px;
            width: 255px;
            height: 55px;
        }
        h1, h2 {
            color: #f37021;
        }
        .buttons {
            text-align: center;
            margin: 20px 0;
        }
        .buttons button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            background-color: #f37021;
            color: white;
            cursor: pointer;
        }
        .buttons button:hover {
            background-color: #d85e1e;
        }
    </style>
</head>
<body onload="setDate()">
    <div class="container">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSn38yw4X3c_0FE53CqcE3TTAFUcK4JpB5Ktg&usqp=CAU" alt="Migros Logo" class="logo">
        <h1>Kasa Sayımı</h1>
        <div class="header">
            <input type="text" placeholder="Kasiyer Sicil" id="kasiyer_sicil">
            <input type="number" placeholder="Kasa No (0-99)" id="kasa_no" min="0" max="99">
            <input type="text" id="tarih" placeholder="Tarih">
        </div>
        <h2>Kağıt Paralar</h2>
        <table>
            <tr>
                <th>Türk Lirası</th>
                <th>Adet</th>
                <th>Toplam</th>
            </tr>
            <tr>
                <td>200 TL</td>
                <td><input type="number" id="adet200" oninput="hesapla()"></td>
                <td id="toplam200">0</td>
            </tr>
            <tr>
                <td>100 TL</td>
                <td><input type="number" id="adet100" oninput="hesapla()"></td>
                <td id="toplam100">0</td>
            </tr>
            <tr>
                <td>50 TL</td>
                <td><input type="number" id="adet50" oninput="hesapla()"></td>
                <td id="toplam50">0</td>
            </tr>
            <tr>
                <td>20 TL</td>
                <td><input type="number" id="adet20" oninput="hesapla()"></td>
                <td id="toplam20">0</td>
            </tr>
            <tr>
                <td>10 TL</td>
                <td><input type="number" id="adet10" oninput="hesapla()"></td>
                <td id="toplam10">0</td>
            </tr>
            <tr>
                <td>5 TL</td>
                <td><input type="number" id="adet5" oninput="hesapla()"></td>
                <td id="toplam5">0</td>
            </tr>
        </table>
        <h2>Bozuk Paralar</h2>
        <table>
            <tr>
                <th>Türk Lirası</th>
                <th>Adet</th>
                <th>Toplam</th>
            </tr>
            <tr>
                <td>5 TL</td>
                <td><input type="number" id="adet5_demir" oninput="hesapla()"></td>
                <td id="toplam5_demir">0</td>
            </tr>
            <tr>
                <td>1 TL</td>
                <td><input type="number" id="adet1" oninput="hesapla()"></td>
                <td id="toplam1">0</td>
            </tr>
            <tr>
                <td>50 Kuruş</td>
                <td><input type="number" id="adet0_50" oninput="hesapla()"></td>
                <td id="toplam0_50">0</td>
            </tr>
            <tr>
                <td>25 Kuruş</td>
                <td><input type="number" id="adet0_25" oninput="hesapla()"></td>
                <td id="toplam0_25">0</td>
            </tr>
            <tr>
                <td>10 Kuruş</td>
                <td><input type="number" id="adet0_10" oninput="hesapla()"></td>
                <td id="toplam0_10">0</td>
            </tr>
            <tr>
                <td>5 Kuruş</td>
                <td><input type="number" id="adet0_05" oninput="hesapla()"></td>
                <td id="toplam0_05">0</td>
            </tr>
            <tr>
                <td>1 Kuruş</td>
                <td><input type="number" id="adet0_01" oninput="hesapla()"></td>
                <td id="toplam0_01">0</td>
            </tr>
        </table>
        <h2>Toplam Tutar: <span id="total">0 TL</span></h2>
        <div class="buttons">
            <button onclick="kaydet()">Kaydet</button>
            <button onclick="pdfOlustur()">PDF Oluştur</button>
            <button onclick="sil()">Sil</button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
    <script>
        function hesapla() {
            var total = 0;
            var values = {
                '200': 200,
                '100': 100,
                '50': 50,
                '20': 20,
                '10': 10,
                '5': 5,
                '1': 1,
                '0_50': 0.50,
                '0_25': 0.25,
                '0_10': 0.10,
                '0_05': 0.05,
                '0_01': 0.01,
                '5_demir': 5
            };
            for (var key in values) {
                var adet = document.getElementById("adet" + key).value;
                var toplam = adet * values[key];
                document.getElementById("toplam" + key).innerText = toplam.toFixed(2);
                total += parseFloat(toplam);
            }
            document.getElementById("total").innerText = total.toLocaleString('tr-TR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' TL';
        }

        function setDate() {
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); 
            var yyyy = today.getFullYear();
            today = dd + '/' + mm + '/' + yyyy;
            document.getElementById("tarih").value = today;
        }

        function kaydet() {
            var data = {
                kasiyerSicil: document.getElementById("kasiyer_sicil").value,
                kasaNo: document.getElementById("kasa_no").value,
                tarih: document.getElementById("tarih").value,
                paralar: {
                    200: document.getElementById("adet200").value,
                    100: document.getElementById("adet100").value,
                    50: document.getElementById("adet50").value,
                    20: document.getElementById("adet20").value,
                    10: document.getElementById("adet10").value,
                    5: document.getElementById("adet5").value,
                    5_demir: document.getElementById("adet5_demir").value,
                    1: document.getElementById("adet1").value,
                    0.50: document.getElementById("adet0_50").value,
                    0.25: document.getElementById("adet0_25").value,
                    0.10: document.getElementById("adet0_10").value,
                    0.05: document.getElementById("adet0_05").value,
                    0.01: document.getElementById("adet0_01").value,
                }
            };
            localStorage.setItem("kasaSayimi", JSON.stringify(data));
            alert("Kasa sayımı başarıyla kaydedildi!");
        }

        function sil() {
            localStorage.removeItem("kasaSayimi");
            document.getElementById("kasiyer_sicil").value = "";
            document.getElementById("kasa_no").value = "";
            document.getElementById("tarih").value = "";
            var keys = [
                "200", "100", "50", "20", "10", "5", "5_demir",
                "1", "0_50", "0_25", "0_10", "0_05", "0_01"
            ];
            keys.forEach(function(key) {
                document.getElementById("adet" + key).value = "";
                document.getElementById("toplam" + key).innerText = "0";
            });
            document.getElementById("total").innerText = "0 TL";
            alert("Kasa sayımı başarıyla silindi!");
        }

        function pdfOlustur() {
            var doc = new jsPDF();
            doc.fromHTML(document.querySelector('.container'), 15, 15, {
                'width': 170
            });
            doc.save('kasa_sayimi.pdf');
        }

        window.onload = function() {
            setDate();
            var savedData = localStorage.getItem("kasaSayimi");
            if (savedData) {
                savedData = JSON.parse(savedData);
                document.getElementById("kasiyer_sicil").value = savedData.kasiyerSicil;
                document.getElementById("kasa_no").value = savedData.kasaNo;
                document.getElementById("tarih").value = savedData.tarih;
                var keys = [
                    "200", "100", "50", "20", "10", "5", "5_demir",
                    "1", "0_50", "0_25", "0_10", "0_05", "0_01"
                ];
                keys.forEach(function(key) {
                    document.getElementById("adet" + key).value = savedData.paralar[key];
                    var toplam = savedData.paralar[key] * parseFloat(key.replace('_', '.').replace('demir', ''));
                    document.getElementById("toplam" + key).innerText = toplam.toFixed(2);
                });
                hesapla();
            }
        }
    </script>
    <!-- jsPDF kütüphanesi -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
</body>
</html>